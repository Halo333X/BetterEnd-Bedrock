{
  "format_version": "1.21.0",
  "minecraft:feature_rules": {
    "description": {
      "identifier": "betterend:terrain_feature_rule",
      "places_feature": "betterend:gen/terrain/terrain_feature"
    },
    "conditions": {
      "placement_pass": "first_pass",
      "minecraft:biome_filter": {
        "test": "has_biome_tag",
        "operator": "==",
        "value": "the_end"
      }
    }, 
    "distribution": {
      "iterations": "(math.abs(v.originx) > 600 || math.abs(v.originz) > 600) ? 256 : 0",
      "x": {
        "distribution": "fixed_grid",
        "extent": [0, 15]
      },
      "y": "t.transitionnoise=q.noise(v.worldx/256,v.worldz/256)*0.25+q.noise(v.worldx/128,v.worldz/128)*0.05+q.noise(v.worldx/64,v.worldz/64)*0.025*q.noise(v.worldx/32,v.worldz/32)*0.01025+q.noise(v.worldx/16,v.worldz/16)*0.01065;t.x=v.worldx/512;t.z=v.worldz/512;t.d1=999.0;t.d2=999.0;t.c1=0.0;t.i=0.0;loop(9,{t.px=math.floor(t.x)+math.mod(t.i,3)-1;t.pz=math.floor(t.z)+math.floor(t.i/3)-1;t.hash_x=math.sin(t.px*12.9898+t.pz*78.233)*43758.5453;t.hash_z=math.sin(t.px*39.3467+t.pz*11.135)*96321.6543;t.rx=t.hash_x-math.floor(t.hash_x);t.rz=t.hash_z-math.floor(t.hash_z);t.d=math.pow(t.px+t.rx+t.transitionnoise-t.x,2)+math.pow(t.pz+t.rz+t.transitionnoise-t.z,2);(t.d<t.d1)?{t.d2=t.d1;t.d1=t.d;t.c1=t.rx;}:{(t.d<t.d2)?{t.d2=t.d;};};t.i=t.i+1;});t.biome='Amber_Land';t.index=math.floor(t.c1*16);(t.index==0)?{t.biome='Amber_Land';};(t.index==1)?{t.biome='Blossoming_Spire';};(t.index==2)?{t.biome='Chorus_Forest';};(t.index==3)?{t.biome='Crystal_Mountains';};(t.index==4)?{t.biome='Dragon_Graveyards';};(t.index==5)?{t.biome='Dry_Shrubland';};(t.index==6)?{t.biome='Foggy_Mushroomland';};(t.index==7)?{t.biome='Glowing_Grasslands';};(t.index==8)?{t.biome='Megalake_Grove';};(t.index==9)?{t.biome='Shadow_Forest';};(t.index==10)?{t.biome='Lantern_Woods';};(t.index==11)?{t.biome='Sulphur_Springs';};(t.index==12)?{t.biome='Umbra_Valley';};(t.index==13)?{t.biome='Umbrella_Jungle';};(t.index==14)?{t.biome='empty_end';};(t.index==15)?{t.biome='Painted_Mountains';};(t.index==15)?{t.dist=math.sqrt(t.d1);((t.dist>=0.0)&&(t.dist<0.5))?{t.biome='Neon_oasis';};((t.dist>=0.5)&&(t.dist<1.0))?{t.biome='Dust_Wastenlands';};};t.surface=q.heightmap(v.worldx,v.worldz);t.crystal_mountainsNoise=t.surface>0?(math.sqrt(math.abs(math.sqrt(t.d1)-math.sqrt(t.d2)))*((t.biome=='Crystal_Mountains')?1:0)*(8*q.noise(v.worldx/64,v.worldz/64)*16+q.noise(v.worldx/32,v.worldz/32)*8)):0;t.painted_mountainsNoise=t.surface>0?(math.sqrt(math.abs(math.sqrt(t.d1)-math.sqrt(t.d2)))*((t.biome=='Painted_Mountains')?1:0)*(16+q.noise(v.worldx/64,v.worldz/64)*32+q.noise(v.worldx/128,v.worldz/128)*32+q.noise(v.worldx/32,v.worldz/32)*16*math.max(0,q.noise(v.worldx/256,v.worldz/256)))):0;t.MegalakeNoise=(math.sqrt(math.abs(math.sqrt(t.d1)-math.sqrt(t.d2)))*((t.biome=='Megalake_Grove')?1:0)*(q.noise(v.worldx/256,v.worldz/256)*16+q.noise(v.worldx/64,v.worldz/64)*8*q.noise(v.worldx/64,v.worldz/64)+6));t.sulphuric_rock=t.surface>0?4+(q.noise(v.worldx/2,v.worldz/2))*2:0;t.end_moss_area=q.noise(v.worldx/48,v.worldz/48)+q.noise(v.worldx/3,v.worldz/3)*0.25;t.CaveHeight=22;t.cave_noise1=q.noise(v.worldx/32,v.worldz/32);t.cave_noise2=q.noise((v.worldx-768)/32,(v.worldz+768)/32);t.pallidium_area=(((q.noise(v.worldx/128,v.worldz/128)*1.5+q.noise(v.worldx/64,v.worldz/64)*1+q.noise(v.worldx/16,v.worldz/16)*0.25+q.noise(v.worldx/4,v.worldz/4)*0.1)+1)/2)*1.5-0.5;t.crystal_moss_patch_area=(((q.noise(v.worldx/32,v.worldz/32)*1.5+q.noise(v.worldx/8,v.worldz/8)*0.5+q.noise(v.worldx,v.worldz)*0.15)+1)/2);t.inactive_brimstone=(((q.noise(v.worldx/128,v.worldz/128)*1.5+q.noise(v.worldx/64,v.worldz/64)*1+q.noise(v.worldx/32,v.worldz/32)*0.3+q.noise(v.worldx/8,v.worldz/8)*0.25)+1)/2)*1.5-0.5;t.FillHeight=64+(t.surface);return0;",
      "z": {
        "distribution": "fixed_grid",
        "extent": [0, 15]
      }
    }
  }
}
//math.sqrt(q.noise(v.worldx/128, v.worldz/128) + 3 * q.noise(v.worldx/64, v.worldz/64) + 2 * q.noise(v.worldx/32, v.worldz/32) + 1)

//t.index==15) ? {t.dist = math.sqrt(t.d1);(t.dist < 0.3333) ? {t.biome = 'Painted_Mountains';};((t.dist >= 0.3333) && (t.dist < 0.6666)) ? {t.biome = 'Neon_oasis';};((t.dist >= 0.6666) && (t.dist < 1.0)) ? {t.biome = 'Dust_Wastenlands';};};
      
      
      
      